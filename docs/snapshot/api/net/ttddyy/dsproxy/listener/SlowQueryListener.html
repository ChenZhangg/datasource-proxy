<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_252) on Tue Mar 02 02:53:53 UTC 2021 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>SlowQueryListener (datasource-proxy 2.0-SNAPSHOT API)</title>
<meta name="date" content="2021-03-02">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SlowQueryListener (datasource-proxy 2.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SlowQueryListener.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/ttddyy/dsproxy/listener/QueryUtils.html" title="class in net.ttddyy.dsproxy.listener"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.RunningQueryContext.html" title="class in net.ttddyy.dsproxy.listener"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/ttddyy/dsproxy/listener/SlowQueryListener.html" target="_top">Frames</a></li>
<li><a href="SlowQueryListener.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.ttddyy.dsproxy.listener</div>
<h2 title="Class SlowQueryListener" class="title">Class SlowQueryListener</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../net/ttddyy/dsproxy/listener/ProxyDataSourceListenerAdapter.html" title="class in net.ttddyy.dsproxy.listener">net.ttddyy.dsproxy.listener.ProxyDataSourceListenerAdapter</a></li>
<li>
<ul class="inheritance">
<li>net.ttddyy.dsproxy.listener.SlowQueryListener</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../net/ttddyy/dsproxy/listener/ProxyDataSourceListener.html" title="interface in net.ttddyy.dsproxy.listener">ProxyDataSourceListener</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">SlowQueryListener</span>
extends <a href="../../../../net/ttddyy/dsproxy/listener/ProxyDataSourceListenerAdapter.html" title="class in net.ttddyy.dsproxy.listener">ProxyDataSourceListenerAdapter</a></pre>
<div class="block">Slow query detection listener.

 When query takes more than specified threshold, <a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#onSlowQuery"><code>onSlowQuery</code></a> callback is called.
 The callback is called only once for the target query if it exceeds the threshold time.

 NOTE:
 <a href="../../../../net/ttddyy/dsproxy/listener/QueryExecutionContext.html#getElapsedTime--"><code>QueryExecutionContext.getElapsedTime()</code></a> contains the time when callback is triggered which usually is the specified threshold time.

 If you want to log or do something with AFTER execution that has exceeded specified threshold time, use normal
 logging listener like following:
 <pre>
 
 long thresholdInMills = ...
 ProxyDataSourceListener listener = new ProxyDataSourceListenerAdapter() {
       @Override
      public void afterQuery(QueryExecutionContext queryContext) {
          if (queryContext.getElapsedTime() >= thresholdInMills) {
              super.afterQuery(queryContext, queryInfoList);
          }
      }
 };
 
 </pre></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.4.1</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Tadaya Tsuyukubo</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.RunningQueryContext.html" title="class in net.ttddyy.dsproxy.listener">SlowQueryListener.RunningQueryContext</a></span></code>
<div class="block">Data holder for currently running query.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledExecutorService</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#executor">executor</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.RunningQueryContext.html" title="class in net.ttddyy.dsproxy.listener">SlowQueryListener.RunningQueryContext</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#inExecution">inExecution</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../net/ttddyy/dsproxy/function/DSProxyConsumer.html" title="interface in net.ttddyy.dsproxy.function">DSProxyConsumer</a>&lt;<a href="../../../../net/ttddyy/dsproxy/listener/QueryExecutionContext.html" title="class in net.ttddyy.dsproxy.listener">QueryExecutionContext</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#onSlowQuery">onSlowQuery</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../net/ttddyy/dsproxy/proxy/StopwatchFactory.html" title="interface in net.ttddyy.dsproxy.proxy">StopwatchFactory</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#stopwatchFactory">stopwatchFactory</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#threshold">threshold</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#thresholdTimeUnit">thresholdTimeUnit</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#useDaemonThread">useDaemonThread</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#SlowQueryListener--">SlowQueryListener</a></span>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#SlowQueryListener-long-java.util.concurrent.TimeUnit-net.ttddyy.dsproxy.function.DSProxyConsumer-">SlowQueryListener</a></span>(long&nbsp;threshold,
                 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;thresholdTimeUnit,
                 <a href="../../../../net/ttddyy/dsproxy/function/DSProxyConsumer.html" title="interface in net.ttddyy.dsproxy.function">DSProxyConsumer</a>&lt;<a href="../../../../net/ttddyy/dsproxy/listener/QueryExecutionContext.html" title="class in net.ttddyy.dsproxy.listener">QueryExecutionContext</a>&gt;&nbsp;onSlowQuery)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#afterQuery-net.ttddyy.dsproxy.listener.QueryExecutionContext-">afterQuery</a></span>(<a href="../../../../net/ttddyy/dsproxy/listener/QueryExecutionContext.html" title="class in net.ttddyy.dsproxy.listener">QueryExecutionContext</a>&nbsp;executionContext)</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#beforeQuery-net.ttddyy.dsproxy.listener.QueryExecutionContext-">beforeQuery</a></span>(<a href="../../../../net/ttddyy/dsproxy/listener/QueryExecutionContext.html" title="class in net.ttddyy.dsproxy.listener">QueryExecutionContext</a>&nbsp;executionContext)</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#getExecutionContextKey-net.ttddyy.dsproxy.listener.QueryExecutionContext-">getExecutionContextKey</a></span>(<a href="../../../../net/ttddyy/dsproxy/listener/QueryExecutionContext.html" title="class in net.ttddyy.dsproxy.listener">QueryExecutionContext</a>&nbsp;queryExecutionContext)</code>
<div class="block">Calculate a key for given <a href="../../../../net/ttddyy/dsproxy/listener/QueryExecutionContext.html" title="class in net.ttddyy.dsproxy.listener"><code>QueryExecutionContext</code></a>.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledExecutorService</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#getExecutor--">getExecutor</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#getThreshold--">getThreshold</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#getThresholdTimeUnit--">getThresholdTimeUnit</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#onSlowQuery-net.ttddyy.dsproxy.listener.QueryExecutionContext-long-">onSlowQuery</a></span>(<a href="../../../../net/ttddyy/dsproxy/listener/QueryExecutionContext.html" title="class in net.ttddyy.dsproxy.listener">QueryExecutionContext</a>&nbsp;queryContext,
           long&nbsp;startTimeInMills)</code>
<div class="block">Callback when query execution time exceeds the threshold.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#setOnSlowQuery-net.ttddyy.dsproxy.function.DSProxyConsumer-">setOnSlowQuery</a></span>(<a href="../../../../net/ttddyy/dsproxy/function/DSProxyConsumer.html" title="interface in net.ttddyy.dsproxy.function">DSProxyConsumer</a>&lt;<a href="../../../../net/ttddyy/dsproxy/listener/QueryExecutionContext.html" title="class in net.ttddyy.dsproxy.listener">QueryExecutionContext</a>&gt;&nbsp;onSlowQuery)</code>
<div class="block">Callback when query execution time exceeds the threshold.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#setStopwatchFactory-net.ttddyy.dsproxy.proxy.StopwatchFactory-">setStopwatchFactory</a></span>(<a href="../../../../net/ttddyy/dsproxy/proxy/StopwatchFactory.html" title="interface in net.ttddyy.dsproxy.proxy">StopwatchFactory</a>&nbsp;stopwatchFactory)</code>
<div class="block">Set <a href="../../../../net/ttddyy/dsproxy/proxy/StopwatchFactory.html" title="interface in net.ttddyy.dsproxy.proxy"><code>StopwatchFactory</code></a> which is used to calculate <a href="../../../../net/ttddyy/dsproxy/listener/QueryExecutionContext.html#getElapsedTime--"><code>QueryExecutionContext.getElapsedTime()</code></a> for slow queries.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#setThreshold-long-">setThreshold</a></span>(long&nbsp;threshHold)</code>&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#setThresholdTimeUnit-java.util.concurrent.TimeUnit-">setThresholdTimeUnit</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;thresholdTimeUnit)</code>&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#setUseDaemonThread-boolean-">setUseDaemonThread</a></span>(boolean&nbsp;useDaemonThread)</code>
<div class="block">When set to <code>true</code>(default), the executor creates daemon threads to check slow queries.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.net.ttddyy.dsproxy.listener.ProxyDataSourceListenerAdapter">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;net.ttddyy.dsproxy.listener.<a href="../../../../net/ttddyy/dsproxy/listener/ProxyDataSourceListenerAdapter.html" title="class in net.ttddyy.dsproxy.listener">ProxyDataSourceListenerAdapter</a></h3>
<code><a href="../../../../net/ttddyy/dsproxy/listener/ProxyDataSourceListenerAdapter.html#afterMethod-net.ttddyy.dsproxy.listener.MethodExecutionContext-">afterMethod</a>, <a href="../../../../net/ttddyy/dsproxy/listener/ProxyDataSourceListenerAdapter.html#beforeMethod-net.ttddyy.dsproxy.listener.MethodExecutionContext-">beforeMethod</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="useDaemonThread">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>useDaemonThread</h4>
<pre>protected&nbsp;boolean useDaemonThread</pre>
</li>
</ul>
<a name="executor">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>executor</h4>
<pre>protected&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledExecutorService</a> executor</pre>
</li>
</ul>
<a name="threshold">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>threshold</h4>
<pre>protected&nbsp;long threshold</pre>
</li>
</ul>
<a name="thresholdTimeUnit">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>thresholdTimeUnit</h4>
<pre>protected&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a> thresholdTimeUnit</pre>
</li>
</ul>
<a name="inExecution">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inExecution</h4>
<pre>protected&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.RunningQueryContext.html" title="class in net.ttddyy.dsproxy.listener">SlowQueryListener.RunningQueryContext</a>&gt; inExecution</pre>
</li>
</ul>
<a name="stopwatchFactory">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stopwatchFactory</h4>
<pre>protected&nbsp;<a href="../../../../net/ttddyy/dsproxy/proxy/StopwatchFactory.html" title="interface in net.ttddyy.dsproxy.proxy">StopwatchFactory</a> stopwatchFactory</pre>
</li>
</ul>
<a name="onSlowQuery">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>onSlowQuery</h4>
<pre>protected&nbsp;<a href="../../../../net/ttddyy/dsproxy/function/DSProxyConsumer.html" title="interface in net.ttddyy.dsproxy.function">DSProxyConsumer</a>&lt;<a href="../../../../net/ttddyy/dsproxy/listener/QueryExecutionContext.html" title="class in net.ttddyy.dsproxy.listener">QueryExecutionContext</a>&gt; onSlowQuery</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="SlowQueryListener--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SlowQueryListener</h4>
<pre>public&nbsp;SlowQueryListener()</pre>
</li>
</ul>
<a name="SlowQueryListener-long-java.util.concurrent.TimeUnit-net.ttddyy.dsproxy.function.DSProxyConsumer-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SlowQueryListener</h4>
<pre>public&nbsp;SlowQueryListener(long&nbsp;threshold,
                         <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;thresholdTimeUnit,
                         <a href="../../../../net/ttddyy/dsproxy/function/DSProxyConsumer.html" title="interface in net.ttddyy.dsproxy.function">DSProxyConsumer</a>&lt;<a href="../../../../net/ttddyy/dsproxy/listener/QueryExecutionContext.html" title="class in net.ttddyy.dsproxy.listener">QueryExecutionContext</a>&gt;&nbsp;onSlowQuery)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="beforeQuery-net.ttddyy.dsproxy.listener.QueryExecutionContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>beforeQuery</h4>
<pre>public&nbsp;void&nbsp;beforeQuery(<a href="../../../../net/ttddyy/dsproxy/listener/QueryExecutionContext.html" title="class in net.ttddyy.dsproxy.listener">QueryExecutionContext</a>&nbsp;executionContext)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../net/ttddyy/dsproxy/listener/ProxyDataSourceListener.html#beforeQuery-net.ttddyy.dsproxy.listener.QueryExecutionContext-">beforeQuery</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../net/ttddyy/dsproxy/listener/ProxyDataSourceListener.html" title="interface in net.ttddyy.dsproxy.listener">ProxyDataSourceListener</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../net/ttddyy/dsproxy/listener/ProxyDataSourceListenerAdapter.html#beforeQuery-net.ttddyy.dsproxy.listener.QueryExecutionContext-">beforeQuery</a></code>&nbsp;in class&nbsp;<code><a href="../../../../net/ttddyy/dsproxy/listener/ProxyDataSourceListenerAdapter.html" title="class in net.ttddyy.dsproxy.listener">ProxyDataSourceListenerAdapter</a></code></dd>
</dl>
</li>
</ul>
<a name="afterQuery-net.ttddyy.dsproxy.listener.QueryExecutionContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>afterQuery</h4>
<pre>public&nbsp;void&nbsp;afterQuery(<a href="../../../../net/ttddyy/dsproxy/listener/QueryExecutionContext.html" title="class in net.ttddyy.dsproxy.listener">QueryExecutionContext</a>&nbsp;executionContext)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../net/ttddyy/dsproxy/listener/ProxyDataSourceListener.html#afterQuery-net.ttddyy.dsproxy.listener.QueryExecutionContext-">afterQuery</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../net/ttddyy/dsproxy/listener/ProxyDataSourceListener.html" title="interface in net.ttddyy.dsproxy.listener">ProxyDataSourceListener</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../net/ttddyy/dsproxy/listener/ProxyDataSourceListenerAdapter.html#afterQuery-net.ttddyy.dsproxy.listener.QueryExecutionContext-">afterQuery</a></code>&nbsp;in class&nbsp;<code><a href="../../../../net/ttddyy/dsproxy/listener/ProxyDataSourceListenerAdapter.html" title="class in net.ttddyy.dsproxy.listener">ProxyDataSourceListenerAdapter</a></code></dd>
</dl>
</li>
</ul>
<a name="getExecutionContextKey-net.ttddyy.dsproxy.listener.QueryExecutionContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExecutionContextKey</h4>
<pre>protected&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getExecutionContextKey(<a href="../../../../net/ttddyy/dsproxy/listener/QueryExecutionContext.html" title="class in net.ttddyy.dsproxy.listener">QueryExecutionContext</a>&nbsp;queryExecutionContext)</pre>
<div class="block">Calculate a key for given <a href="../../../../net/ttddyy/dsproxy/listener/QueryExecutionContext.html" title="class in net.ttddyy.dsproxy.listener"><code>QueryExecutionContext</code></a>.

 <p>This key is passed to the slow query check <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang"><code>Runnable</code></a> as well as for removal in <a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.html#afterQuery-net.ttddyy.dsproxy.listener.QueryExecutionContext-"><code>afterQuery(QueryExecutionContext)</code></a>.

 <p>Default implementation uses <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/System.html?is-external=true#identityHashCode-java.lang.Object-" title="class or interface in java.lang"><code>System.identityHashCode(Object)</code></a>. This does NOT guarantee 100% of uniqueness; however, since
 the current usage of the key is short lived and good enough for this use case.
 <p>Subclass can override this method to provide different implementation to uniquely represent <a href="../../../../net/ttddyy/dsproxy/listener/QueryExecutionContext.html" title="class in net.ttddyy.dsproxy.listener"><code>QueryExecutionContext</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>queryExecutionContext</code> - execution info</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>key</dd>
</dl>
</li>
</ul>
<a name="onSlowQuery-net.ttddyy.dsproxy.listener.QueryExecutionContext-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onSlowQuery</h4>
<pre>protected&nbsp;void&nbsp;onSlowQuery(<a href="../../../../net/ttddyy/dsproxy/listener/QueryExecutionContext.html" title="class in net.ttddyy.dsproxy.listener">QueryExecutionContext</a>&nbsp;queryContext,
                           long&nbsp;startTimeInMills)</pre>
<div class="block">Callback when query execution time exceeds the threshold.

 Subclass can override this method to add behavior.
 This callback is called only once per query if it exceeds the threshold time.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>queryContext</code> - query execution info</dd>
<dd><code>startTimeInMills</code> - time in mills when the query started</dd>
</dl>
</li>
</ul>
<a name="setThreshold-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setThreshold</h4>
<pre>public&nbsp;void&nbsp;setThreshold(long&nbsp;threshHold)</pre>
</li>
</ul>
<a name="setThresholdTimeUnit-java.util.concurrent.TimeUnit-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setThresholdTimeUnit</h4>
<pre>public&nbsp;void&nbsp;setThresholdTimeUnit(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;thresholdTimeUnit)</pre>
</li>
</ul>
<a name="getExecutor--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExecutor</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledExecutorService</a>&nbsp;getExecutor()</pre>
</li>
</ul>
<a name="getThreshold--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getThreshold</h4>
<pre>public&nbsp;long&nbsp;getThreshold()</pre>
</li>
</ul>
<a name="getThresholdTimeUnit--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getThresholdTimeUnit</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;getThresholdTimeUnit()</pre>
</li>
</ul>
<a name="setUseDaemonThread-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setUseDaemonThread</h4>
<pre>public&nbsp;void&nbsp;setUseDaemonThread(boolean&nbsp;useDaemonThread)</pre>
<div class="block">When set to <code>true</code>(default), the executor creates daemon threads to check slow queries.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>useDaemonThread</code> - use daemon thread or not. (default is true)</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.4.2</dd>
</dl>
</li>
</ul>
<a name="setOnSlowQuery-net.ttddyy.dsproxy.function.DSProxyConsumer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setOnSlowQuery</h4>
<pre>public&nbsp;void&nbsp;setOnSlowQuery(<a href="../../../../net/ttddyy/dsproxy/function/DSProxyConsumer.html" title="interface in net.ttddyy.dsproxy.function">DSProxyConsumer</a>&lt;<a href="../../../../net/ttddyy/dsproxy/listener/QueryExecutionContext.html" title="class in net.ttddyy.dsproxy.listener">QueryExecutionContext</a>&gt;&nbsp;onSlowQuery)</pre>
<div class="block">Callback when query execution time exceeds the threshold.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>onSlowQuery</code> - a consumer that is called only once per query if it exceeds the threshold time.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>2.0</dd>
</dl>
</li>
</ul>
<a name="setStopwatchFactory-net.ttddyy.dsproxy.proxy.StopwatchFactory-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>setStopwatchFactory</h4>
<pre>public&nbsp;void&nbsp;setStopwatchFactory(<a href="../../../../net/ttddyy/dsproxy/proxy/StopwatchFactory.html" title="interface in net.ttddyy.dsproxy.proxy">StopwatchFactory</a>&nbsp;stopwatchFactory)</pre>
<div class="block">Set <a href="../../../../net/ttddyy/dsproxy/proxy/StopwatchFactory.html" title="interface in net.ttddyy.dsproxy.proxy"><code>StopwatchFactory</code></a> which is used to calculate <a href="../../../../net/ttddyy/dsproxy/listener/QueryExecutionContext.html#getElapsedTime--"><code>QueryExecutionContext.getElapsedTime()</code></a> for slow queries.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>stopwatchFactory</code> - factory to create <a href="../../../../net/ttddyy/dsproxy/proxy/Stopwatch.html" title="interface in net.ttddyy.dsproxy.proxy"><code>Stopwatch</code></a> used for calculating elapsed time for slow queries</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.5.1</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SlowQueryListener.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><!-- Global site tag (gtag.js) - Google Analytics -->                 <script async src="https://www.googletagmanager.com/gtag/js?id=UA-1318853-6"></script>                 <script>                   window.dataLayer = window.dataLayer || [];                   function gtag(){dataLayer.push(arguments);}                   gtag('js', new Date());                    gtag('config', 'UA-1318853-6');                 </script>                 ]</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/ttddyy/dsproxy/listener/QueryUtils.html" title="class in net.ttddyy.dsproxy.listener"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../net/ttddyy/dsproxy/listener/SlowQueryListener.RunningQueryContext.html" title="class in net.ttddyy.dsproxy.listener"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/ttddyy/dsproxy/listener/SlowQueryListener.html" target="_top">Frames</a></li>
<li><a href="SlowQueryListener.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2021. All rights reserved.</small></p>
</body>
</html>
